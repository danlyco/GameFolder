{"version":3,"sources":["../src/display.js"],"names":["Game","Event","Test","DisplayManager","constructor","state","player","players","char","onChange","refresh","intro","$intro","$","css","background","text","addClass","appendTo","attr","gameModeSelection","$gameMode","prependTo","$gameModeBoxes","slideShow","characterSelection","mode","$previousScreen","slideHide","$charSelTip","$charSel","forEach","elem","$charSelPlayer","$charSelChars","possibleChar","getCharModels","toLowerCase","$charSelector","transform","left","characterSelector","clickedElement","removeClass","target","classList","remove","add","$background","cleanup","$char","split","pop","replace","playerModel","length","timer","setTimeout","animation","init","$gameBoard","numberRowCol","Math","floor","sqrt","board","tiles","y","$row","x","tileNumber","$col","$tile","$block","_type","isEmpty","_hasItem","hasPlayer","$item","items","name","html","desc","descChar","getPossibleMoves","isObstacle","_model","reachable","getTile","find","removeAttr","Display","interface","showDamages","$wrapper","empty","$totalTurnBar","$interfacePlayer","number","$healthbar","activeFight","onFight","tile","_hasPlayer","getPos","totalTurn","escapeTurn","width","activePlayer","i","desiredChar","equipedItem","_health","default"],"mappings":"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","sourcesContent":["\r\n/* eslint-disable no-restricted-syntax */\r\n/* eslint-disable class-methods-use-this */\r\n/* eslint-disable import/no-cycle */\r\n/* eslint-disable import/extensions */\r\n/* eslint-disable no-unused-vars */\r\n\r\n/**\r\n * @module Display\r\n */\r\n\r\n\r\nimport Game from './game.js';\r\nimport Event from './event.js';\r\nimport Test from './test.js';\r\n\r\nclass DisplayManager {\r\n  /**\r\n   * Call different display states\r\n   * @class DisplayManager\r\n   */\r\n  constructor() {\r\n    this.state = 'intro';\r\n    // eslint-disable-next-line no-restricted-syntax\r\n    for (const player of Game.players) {\r\n      player.char.onChange(() => DisplayManager.refresh());\r\n    }\r\n    Game.onChange(() => DisplayManager.refresh());\r\n  }\r\n\r\n  // eslint-disable-next-line class-methods-use-this\r\n  /** Used to show intro screen */\r\n  intro() {\r\n    const $intro = $('.intro').css({\r\n      background: 'url(\"./assets/img/intro.gif\") no-repeat',\r\n      'background-size': '100%',\r\n    });\r\n    $('<button></button>').text('Nouvelle partie').addClass('intro--newgame')\r\n      .appendTo($intro);\r\n    $('<img>').addClass('intro--leaves')\r\n      .attr('src', './assets/img/intro-leaves.png').appendTo($intro);\r\n    $('<img>').addClass('intro--title')\r\n      .attr('src', './assets/img/intro-title.png').appendTo($intro);\r\n  }\r\n\r\n  /** Used to show game mode selection screen */\r\n  gameModeSelection() {\r\n    const $intro = $('.intro');\r\n    $('.intro--leaves').css('animation-play-state', 'running');\r\n    $('<h1></h1>').text('Select game mode').addClass('intro--gameMode__tip').appendTo($intro);\r\n    const $gameMode = $('<div></div>').addClass('intro--gameMode').prependTo($intro);\r\n    $('<div></div>').addClass('intro--gameMode__box').css('background', 'url(\"./assets/img/intro--survival.png\") 0 0 no-repeat').appendTo($gameMode);\r\n    $('<div></div>').addClass('intro--gameMode__box').css('background', 'url(\"./assets/img/intro--versus.png\") 0 0 no-repeat').appendTo($gameMode);\r\n    const $gameModeBoxes = $('.intro--gameMode__box, .intro--gameMode__tip');\r\n    this.slideShow($gameModeBoxes, 1000);\r\n  }\r\n\r\n  /** Used to show character selection screen */\r\n  characterSelection(mode) {\r\n    // Removing previous screen\r\n    const $previousScreen = $('.intro--gameMode__box, .intro--gameMode__tip');\r\n    this.slideHide($previousScreen);\r\n\r\n    const $intro = $('.intro');\r\n    const $charSelTip = $('<h1></h1>').text('Select character').addClass('intro--characterSelection__tip').appendTo($intro);\r\n    this.slideShow($charSelTip, 1000);\r\n    const $charSel = $('<div></div>').addClass('intro--characterSelection').appendTo($intro);\r\n    [1, 2].forEach(\r\n      (elem) => {\r\n        const $charSelPlayer = $('<div></div>').addClass('intro--characterSelection__player').appendTo($charSel);\r\n        $('<h1></h1>').text(`P${elem}`).appendTo($charSelPlayer);\r\n        const $charSelChars = $('<div></div>').addClass('intro--characterSelection__chars').appendTo($charSelPlayer);\r\n        const possibleChar = Game.getCharModels(mode);\r\n        for (const char of possibleChar) {\r\n          $('<div></div>').addClass('intro--characterSelection__char').css('background-image',\r\n            `url('./assets/chars/${char.toLowerCase()}.png')`).appendTo($charSelChars);\r\n        }\r\n        const $charSelector = $('<div></div>').addClass('intro--characterSelection__charPreview').appendTo($charSelPlayer);\r\n        if (elem === 2) {$charSelector.css({\r\n          transform: 'scaleX(-1)',\r\n          left: '40%',\r\n        });\r\n        }\r\n      },\r\n    );\r\n  }\r\n\r\n  /** Used to get visual feedback when selecting character */\r\n  characterSelector(char, clickedElement) {\r\n    $(`.intro--characterSelection__player:eq(${char}) > .intro--characterSelection__chars > .intro--characterSelection__char`).addClass('out');\r\n    $(`.intro--characterSelection__player:eq(${char}) > .intro--characterSelection__chars > .intro--characterSelection__char`).removeClass('selected');\r\n    clickedElement.target.classList.remove('out');\r\n    clickedElement.target.classList.add('selected');\r\n    const $background = $(`.intro--characterSelection__player:eq(${char}) > .intro--characterSelection__chars > .selected`).css('background-image');\r\n    const cleanup = '/\"|\\'|)/g';\r\n    const $char = $background.split('/').pop().replace(\"cleanup\", '').split('.png')[0];\r\n    $(`.intro--characterSelection__player:eq(${char}) > .intro--characterSelection__charPreview`).css('background-image', 'none');\r\n    $(`.intro--characterSelection__player:eq(${char}) > .intro--characterSelection__charPreview`).css('background-image', $background);\r\n    if (Game.playerModel.length >= 1) {\r\n      const $intro = $('.intro');\r\n      $('.intro--characterSelection__startButton').remove();\r\n      $('<button>').text('START').addClass('intro--characterSelection__startButton').appendTo($intro);\r\n    }\r\n    return $char;\r\n  }\r\n\r\n  /**\r\n   * Show an element with slide down animation\r\n   * @param {ObJect} elem\r\n   * @param {Int} timer Niliseconds value before the animation starts\r\n   */\r\n  slideShow(elem, timer) {\r\n    setTimeout(() => {\r\n      elem.css({\r\n        animation: 'slidedown-show 1s forwards',\r\n        'animation-play-state': 'running',\r\n      });\r\n    }, timer);\r\n  }\r\n\r\n  /**\r\n   * Hide an element with slide up animation\r\n   * @param {ObJect} elem\r\n   */\r\n  slideHide(elem) {\r\n    elem.css({\r\n      animation: 'slideup-hide 1s forwards',\r\n      'animation-play-state': 'running',\r\n    });\r\n  }\r\n\r\n  // winning() {}\r\n\r\n  /**\r\n   * Init the board with all games value\r\n   */\r\n  init() {\r\n    const $intro = $('.intro');\r\n    this.slideHide($intro, 1000);\r\n    setTimeout(() => {\r\n      $intro.remove();\r\n    }, 105);\r\n    $('table').css('animation-play-state', 'running');\r\n    const $gameBoard = $('tbody');\r\n\r\n    // Calculating number of rows and line\r\n    // Ex: if board contains 49 tiles, get square root of 49 = 7.\r\n    const numberRowCol = Math.floor(Math.sqrt(Game.board.tiles.length));\r\n\r\n    for (let y = 0; y < numberRowCol; ++y) {\r\n      const $row = $('<tr></tr>').css({\r\n        transform: `translateY(${19 * y}px)`,\r\n      }).addClass(`row-${y}`).appendTo($gameBoard);\r\n      for (let x = 0; x < numberRowCol; ++x) {\r\n        const tileNumber = x + numberRowCol * y;\r\n        const $col = $('<td></td>').css({\r\n          transform: `translateX(${19 * x}px)`,\r\n        }).addClass(`col-${x}`).appendTo($row);\r\n        const $tile = $('<div></div>').addClass('block').addClass(`tile-${tileNumber}`).appendTo($col);\r\n        const $block = $('<div></div>').addClass(`block--${Game.board.tiles[tileNumber]._type.toLowerCase()}`).appendTo($tile);\r\n        if (Game.board.tiles[tileNumber].isEmpty()) {\r\n          if (Game.board.tiles[tileNumber]._hasItem[0] === 1) {\r\n            if (Game.board.tiles[tileNumber].hasPlayer === 0) {\r\n              const $item = $('<div></div>').addClass('item').css('background', `url(../assets/items/${Game.items[Game.board.tiles[tileNumber]._hasItem[1]].name.toLowerCase()}.png) 0px 0px no-repeat`).appendTo($block);\r\n              $('<div></div>').addClass('tooltiptext').html(`<h1>${Game.items[Game.board.tiles[tileNumber]._hasItem[1]].name}</h1><br /><p>${Game.items[Game.board.tiles[tileNumber]._hasItem[1]].desc}</p><br />${Game.items[Game.board.tiles[tileNumber]._hasItem[1]].descChar}`).appendTo($item);\r\n            }\r\n          } else {\r\n            // $block.find('.item').css('opacity', '0');\r\n          }\r\n        }\r\n\r\n        Game.getPossibleMoves();\r\n\r\n        if (Game.board.tiles[tileNumber].isObstacle()) {\r\n          $block.addClass(`block--obstacle__${Game.board.tiles[tileNumber]._model.toLowerCase()}`);\r\n        }\r\n        if (Game.board.tiles[tileNumber].reachable === 1) {\r\n          $(`.tile-${tileNumber}`).addClass('block--possibleMove');\r\n        } else {\r\n          $(`.tile-${tileNumber}`).removeClass('block--possibleMove');\r\n        }\r\n      }\r\n    }\r\n\r\n    $(`.tile-${Game.players[0].char.getTile()}`).find('div:eq(0)').removeAttr('class').addClass('block--player')\r\n      .addClass(`block--player__${Game.players[0].char.name.toLowerCase()}`);\r\n    $(`.tile-${Game.players[1].char.getTile()}`).find('div:eq(0)').removeAttr('class').addClass('block--player')\r\n      .addClass(`block--player__${Game.players[1].char.name.toLowerCase()}`);\r\n\r\n    Display.interface();\r\n  }\r\n\r\n  static showDamages() {\r\n    // let $;\r\n  }\r\n\r\n  /** Remove actual board visual elements */\r\n  remove() {\r\n    const $gameBoard = $('tbody tr');\r\n    $gameBoard.remove();\r\n  }\r\n\r\n  /** Construct interface based on GameMode */\r\n  interface() {\r\n    // Basic interface writing\r\n    const $wrapper = $('.interface');\r\n    $wrapper.empty();\r\n    $('<div></div>').addClass('interface--element interface--fight__blason').prependTo($wrapper);\r\n    $('<div></div>').addClass('interface--element interface--button__music').prependTo($wrapper);\r\n    const $totalTurnBar = $('<div></div>').addClass('interface--element interface--bar__totalturn').prependTo($wrapper);\r\n    $('<p></p>').addClass('totalTurn').appendTo($totalTurnBar);\r\n    $('<div></div>').addClass('interface--bar__totalturn__fill').appendTo($totalTurnBar);\r\n    $('<div></div>').addClass('interface--button__action1').attr('id', 'action1').prependTo($wrapper);\r\n    $('<div></div>').addClass('interface--button__action2').attr('id', 'action2').prependTo($wrapper);\r\n    Game.players.forEach(\r\n      (player) => {\r\n        const $interfacePlayer = $('<div></div>').addClass(`interface--player interface--player__${player.number}`).appendTo($wrapper);\r\n        $('<div></div>').addClass(`interface--element interface--player__${player.number}__char`).appendTo($interfacePlayer);\r\n        $('<div></div>').addClass(`interface--element interface--equipedItem interface--player__${player.number}__equipedItem`).appendTo($interfacePlayer);\r\n        const $healthbar = $('<div></div>').addClass('interface--element interface--healthbar').appendTo($interfacePlayer);\r\n        $('<div></div>').addClass('interface--healthbar__overlay').appendTo($healthbar);\r\n        if (player.number === 2) $healthbar.css('transform', 'scaleX(-1)');\r\n      },\r\n    );\r\n\r\n    if (Game.mode === 'versus') {\r\n      const activeFight = Game.players[0].char.onFight;\r\n      switch (activeFight) {\r\n      // in fight loop\r\n        case 1:\r\n          $('.interface--button__action1').css('background', 'url(./assets/img/button-attack.png) no-repeat').css('left', '49%');\r\n          $('.interface--button__action2').css('background', 'url(./assets/img/button-block.png) no-repeat');\r\n          $('.interface--fight-blason:eq(0)').css('visibility', 'visible');\r\n          Game.board.tiles.forEach((tile) => {\r\n            if (!tile._hasPlayer) {\r\n              $(`.tile-${tile.getPos()[0] + tile.getPos()[1] * Math.floor(Math.sqrt(Game.board.tiles.length))}:eq(0)`).css('filter', 'grayscale(100)');\r\n            }\r\n          });\r\n          break;\r\n\r\n        // out of fight\r\n        case 0:\r\n          $('#action1').css('background', 'url(./assets/img/button-equip.png) no-repeat');\r\n          $('#action2').css('background', 'url(./assets/img/button-turn.png) no-repeat');\r\n          break;\r\n\r\n        default:\r\n          break;\r\n      }\r\n    } else {\r\n      $('.interface--bar__totalturn').css('visibility', 'visible');\r\n      $('.totalTurn').text(`Tour : ${Game.totalTurn}/${Game.escapeTurn}`);\r\n      $('.interface--bar__totalturn__fill').width(`${(Game.totalTurn / Game.escapeTurn) * 100}%`);\r\n    }\r\n\r\n    /**\r\n     * Show the player which one is active\r\n     */\r\n    switch (Game.activePlayer) {\r\n      case 0:\r\n        $('.interface--player__1').removeClass('interface--inactive');\r\n        $('.interface--player__2').addClass('interface--inactive');\r\n        break;\r\n\r\n      case 1:\r\n        $('.interface--player__2').removeClass('interface--inactive');\r\n        $('.interface--player__1').addClass('interface--inactive');\r\n        break;\r\n\r\n      default:\r\n        break;\r\n    }\r\n\r\n    for (let i = 0; i < Game.players.length; ++i) {\r\n      if (Game.players[i].desiredChar === 0) {\r\n        $(`.interface--player__${i + 1}__char:eq(0)`).addClass('interface--player__char__survivor');\r\n      } else {\r\n        $(`.interface--player__${i + 1}__char:eq(0)`).addClass('interface--player__char__chaser');\r\n      }\r\n      $(`.interface--player__${i + 1}__char:eq(0)`).addClass(`block--player__${Game.players[i].char.name.toLowerCase()}`);\r\n      $(`.interface--player__${i + 1}__equipedItem:eq(0)`).css('background', `url(../assets/items/${Game.players[i].char.equipedItem.name.toLowerCase()}.png) center center no-repeat, black`);\r\n      $(`.interface--player__${i + 1} .interface--healthbar__overlay`).css({\r\n        width: `${Game.players[i].char._health}%`,\r\n      }).text(`${Game.players[i].char._health}/100`);\r\n    }\r\n  }\r\n\r\n  /** Refresh visual elements of board */\r\n  static refresh() {\r\n    Display.remove();\r\n    Display.init();\r\n  }\r\n}\r\n\r\nconst Display = new DisplayManager();\r\nDisplay.intro();\r\n\r\n\r\nexport { Display as default };\r\n"],"file":"display.js"}