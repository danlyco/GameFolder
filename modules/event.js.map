{"version":3,"sources":["../src/event.js"],"names":["Game","Display","EventManager","constructor","$","document","on","gameModeSelection","characterSelection","forEach","elem","clickedElement","event","target","classList","contains","playerModel","characterSelector","console","info","undefined","length","startButton","itemSpawn","playerSpawn","init","player","players","char","onChange","refresh","winning","tileNumber","find","split","tilePos","board","tiles","getPos","_reachable","activePlayer","move","parseFloat","checkPlayersProximity","onFight","nextTurn","playerTile","getTile","_x","_y","lineOfTiles","_hasItem","checkItem","location","reload","Event","default"],"mappings":"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","sourcesContent":["import Game from './game.js';\r\nimport Display from './display.js';\r\n\r\nclass EventManager {\r\n  constructor() {\r\n    // Intro\r\n\r\n    // Display the game mode selection screen using Display module\r\n    $(document).on('click', '.intro--newgame', () => {\r\n      Display.gameModeSelection();\r\n    });\r\n\r\n    // Display the character selection screen using Display module\r\n    $(document).on('click', '.intro--gameMode__box:eq(1)', () => {\r\n      Display.characterSelection('versus');\r\n    });\r\n\r\n    // Select character using Display and Game module\r\n    [0, 1].forEach((elem) => {\r\n      $(document).on('click', `.intro--characterSelection__player:eq(${elem})`, (clickedElement) => {\r\n        if (event.target.classList.contains('intro--characterSelection__char')) {\r\n          Game.playerModel[elem] = Display.characterSelector(elem, clickedElement);\r\n          console.info(Game.playerModel);\r\n          if (Game.playerModel[0] !== undefined && Game.playerModel.length > 1) {\r\n            Display.startButton();\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    // Display and init the game\r\n    $(document).on('click', '.intro--characterSelection__startButton', () => {\r\n      Game.itemSpawn();\r\n      Game.playerSpawn();\r\n      Display.init();\r\n      for (const player of Game.players) {\r\n        player.char.onChange(() => Display.refresh());\r\n      }\r\n      Game.onChange(() => Display.refresh());\r\n      Game.onChange(() => Display.winning(this));\r\n    });\r\n\r\n\r\n    // eslint-disable-next-line func-names\r\n    $(document).on('click', 'td', function () {\r\n      const tileNumber = $(this).find('.block')[0].classList[1].split('tile-')[1];\r\n      const tilePos = Game.board.tiles[tileNumber].getPos();\r\n      if (Game.board.tiles[tileNumber]._reachable === 1) {\r\n        Game.players[Game.activePlayer].char.move(parseFloat(tilePos[0]), parseFloat(tilePos[1]));\r\n        Game.checkPlayersProximity();\r\n        // if(Game.board.tiles[tileNumber]._hasItem[1]){\r\n        //     Game.players[Game.activePlayer].char\r\n        //       .checkItem(Game.board.tiles[tileNumber]._hasItem[1], Game.board.tiles[tileNumber]);\r\n        // }\r\n      }\r\n    });\r\n\r\n    $(document).on('click', '#action2', () => {\r\n      switch (Game.players[0].char.onFight) {\r\n        case 0:\r\n          Game.nextTurn();\r\n          break;\r\n        case 1:\r\n          Game.nextTurn('defend');\r\n          break;\r\n        default:\r\n          // console.info(Game.players[0].char._onFight);\r\n          break;\r\n      }\r\n    });\r\n\r\n    $(document).on('click', '#action1', () => {\r\n      switch (Game.players[0].char.onFight) {\r\n        case 0: {\r\n          const playerTile = Game.board.tiles[Game.players[Game.activePlayer].char.getTile()];\r\n          const tileNumber = playerTile._x + playerTile._y * Game.board.lineOfTiles;\r\n          if (Game.board.tiles[tileNumber]._hasItem[0] === 1) {\r\n            Game.players[Game.activePlayer].char\r\n              .checkItem(Game.board.tiles[tileNumber]._hasItem[1], Game.board.tiles[tileNumber]);\r\n          }\r\n          break;\r\n        }\r\n        case 1:\r\n          Game.nextTurn('attack');\r\n          break;\r\n        default:\r\n          // console.info(Game.players[0].char._onFight);\r\n          break;\r\n      }\r\n    });\r\n\r\n    // Display the character selection screen using Display module\r\n    $(document).on('click', '.interface--winner__newgame', () => {\r\n      location.reload();\r\n    });\r\n  }\r\n}\r\n\r\nconst Event = new EventManager();\r\n\r\nexport { Event as default };\r\n"],"file":"event.js"}