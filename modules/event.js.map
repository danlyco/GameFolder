{"version":3,"sources":["../src/event.js"],"names":["Game","Display","EventManager","constructor","$","document","on","gameModeSelection","characterSelection","forEach","elem","clickedElement","event","target","classList","contains","playerModel","characterSelector","init","itemSpawn","playerSpawn","tileNumber","find","split","tilePos","board","tiles","getPos","_reachable","players","activePlayer","char","move","parseFloat","checkPlayersProximity","onFight","console","info","nextTurn","playerTile","getTile","_x","_y","lineOfTiles","_hasItem","checkItem","Event","default"],"mappings":"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","sourcesContent":["import Game from './game.js';\r\nimport Display from './display.js';\r\n\r\nclass EventManager {\r\n  constructor() {\r\n    // Intro\r\n\r\n    // Display the game mode selection screen using Display module\r\n    $(document).on('click', '.intro--newgame', function () {\r\n      Display.gameModeSelection();\r\n    });\r\n\r\n    // Display the character selection screen using Display module\r\n    $(document).on('click', '.intro--gameMode__box:eq(1)', function () {\r\n        Display.characterSelection('versus');\r\n    });\r\n    \r\n    // Select character using Display and Game module\r\n    [0, 1].forEach(function(elem) {\r\n      $(document).on('click', `.intro--characterSelection__player:eq(${elem})`, function (clickedElement) {\r\n        if(event.target.classList.contains('intro--characterSelection__char')) {\r\n          Game.playerModel[elem] = Display.characterSelector(elem, clickedElement);\r\n          }\r\n      });\r\n    });\r\n\r\n    // Display and init the game\r\n    $(document).on('click', '.intro--characterSelection__startButton', function () {\r\n      Display.init();\r\n      Game.itemSpawn();\r\n      Game.playerSpawn();\r\n    });\r\n\r\n\r\n    // eslint-disable-next-line func-names\r\n    $(document).on('click', 'td', function () {\r\n      const tileNumber = $(this).find('.block')[0].classList[1].split('tile-')[1];\r\n      const tilePos = Game.board.tiles[tileNumber].getPos();\r\n      if (Game.board.tiles[tileNumber]._reachable === 1) {\r\n        Game.players[Game.activePlayer].char.move(parseFloat(tilePos[0]), parseFloat(tilePos[1]));\r\n        Game.checkPlayersProximity();\r\n        // if(Game.board.tiles[tileNumber]._hasItem[1]){\r\n        //     Game.players[Game.activePlayer].char\r\n        //       .checkItem(Game.board.tiles[tileNumber]._hasItem[1], Game.board.tiles[tileNumber]);\r\n        // }\r\n      }\r\n    });\r\n\r\n    $(document).on('click', '#action2', () => {\r\n      switch (Game.players[0].char.onFight) {\r\n        case 0:\r\n          console.info('test');\r\n          Game.nextTurn();\r\n          break;\r\n        case 1:\r\n          Game.nextTurn('defend');\r\n          break;\r\n        default:\r\n          // console.info(Game.players[0].char._onFight);\r\n          break;\r\n      }\r\n    });\r\n\r\n    $(document).on('click', '#action1', () => {\r\n      switch (Game.players[0].char.onFight) {\r\n        case 0: {\r\n          const playerTile = Game.board.tiles[Game.players[Game.activePlayer].char.getTile()];\r\n          const tileNumber = playerTile._x + playerTile._y * Game.board.lineOfTiles;\r\n          if (Game.board.tiles[tileNumber]._hasItem[0] === 1) {\r\n            Game.players[Game.activePlayer].char\r\n              .checkItem(Game.board.tiles[tileNumber]._hasItem[1], Game.board.tiles[tileNumber]);\r\n          }\r\n          break;\r\n        }\r\n        case 1:\r\n          Game.nextTurn('attack');\r\n          break;\r\n        default:\r\n          // console.info(Game.players[0].char._onFight);\r\n          break;\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nconst Event = new EventManager();\r\n\r\nexport { Event as default };\r\n"],"file":"event.js"}